<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
	
<mapper namespace="mapper.mypage">
	<select id="selectProductCnt" parameterType="String" resultType="Integer">
		select count(*) from product p join member m
		on (p.memberNo = m.no)
		where m.id=#{id}	
	</select>
	
	<select id="selectProductListByPage" parameterType="map" resultType="product">
		select p.no, p.createDate, p.title, p.salePrice, p.deliveryprice 
		from product p join member m
        on (p.memberNo=m.no)
        where m.id=#{id} 
        order by p.no desc limit #{row},5
	</select>
	
	<select id="selectMySellDetail" parameterType="map" resultType="map">
		select 
		p.*, o.orderNo, o.orderDate, o.deliveryAddr, o.paymentType, o.invoiceNo, o.deliveryComp,
		m1.name, m1.id, m1.phone
        from Product p 
        join `Order` o On (o.productNo = p.no)
        join member m1 On (o.memberNo = m1.no)
		  JOIN member m2 ON p.memberNo = m2.no
		  where o.orderNo=#{orderNo} and m2.id=#{id}
	</select>
	
</mapper>